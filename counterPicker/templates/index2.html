<!-- templates/indexAPI.html -->
<!doctype html>
<html>
<head><meta charset="utf-8"><title>Dota 2 Counter Picker</title></head>
<body>
<h1>Dota 2 Counter Picker</h1>
<input id="h1" placeholder="Hero 1 (e.g. Ursa)"/>
<input id="h2" placeholder="Hero 2 (optional)"/>
<button id="go">Get Counters</button>

<h2>Top Counters</h2>
<ul id="out"></ul>

<script>
document.getElementById('go').addEventListener('click', async () => {
  const h1 = document.getElementById('h1').value.trim();
  const h2 = document.getElementById('h2').value.trim();
  const heroes = [h1, h2].filter(Boolean);
  const res = await fetch('/get_counters', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({heroes})
  });
  const data = await res.json();
  const out = document.getElementById('out');
  out.innerHTML = '';
  if (!Array.isArray(data)) {
    out.innerHTML = '<li style="color:red">' + (data.error || 'bad response') + '</li>';
    return;
  }
  data.forEach(d => {
    const li = document.createElement('li');
    li.textContent = `${d.hero}: ${d.enemy_winrate}% (games: ${d.games})`;
    out.appendChild(li);
  });
});
</script>
</body>
</html>
